@import '../theme/var';
@import '../theme/mixin';
@import '../../node_modules/@angular/cdk/text-field';

.aui-input {
  display: inline-block;
  padding: 0 get-size(inline-padding-xs);
  width: 100%;
  // firefox has default min-width, override it for flex shrinking
  min-width: 0;
  border: 1px solid get-color(n-7);
  border-radius: get-size(border-radius-m);
  background-color: get-color(n-9);
  color: get-text-color(main);
  outline: none;
  text-overflow: ellipsis;
  @include cdk-text-field-autofill-color(get-color(n-9), get-text-color(main));

  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  &[type='number'] {
    -moz-appearance: textfield;
  }

  &::placeholder {
    color: get-text-color(placeholder);
  }

  &:invalid,
  &:required {
    box-shadow: none;
  }

  &:hover {
    border-color: get-color(primary);
  }

  &:focus,
  &.isFocused {
    border-color: get-color(primary);
    @include outline-shadow(primary);
  }

  &[readonly] {
    background-color: get-color(n-8);
    border-color: get-color(n-7) !important;
    cursor: default;
  }

  &[disabled] {
    background-color: get-color(n-8);
    border-color: get-color(n-7) !important;
    color: get-text-color(disabled);
    cursor: not-allowed;
  }

  &--large {
    height: get-size(inline-height-l);
    font-size: get-size(font-size-l);
  }

  &--medium {
    height: get-size(inline-height-m);
    font-size: get-size(font-size-m);
  }

  &--small {
    height: get-size(inline-height-s);
    font-size: get-size(font-size-m);
  }

  &--mini {
    height: get-size(inline-height-xs);
    font-size: get-size(font-size-s);
  }
}

textarea.aui-input {
  $default-line-count: 3;
  $max-line-count: 6;

  @function get-height-calc($line-height, $line-count) {
    @return calc(
      #{get-size(inline-padding-xxs)} * 2 + #{get-size(
          line-height-#{$line-height}
        )} * #{$line-count} + 2px
    );
  }

  padding: get-size(inline-padding-xxs) get-size(inline-padding-xs);
  height: get-height-calc(m, $default-line-count);
  max-height: get-height-calc(m, $max-line-count);
  min-height: get-size(inline-height-m);
  @include text-set(m, main);

  resize: vertical;
  overflow: auto;
}

.aui-input.ng-invalid.ng-dirty,
.ng-submitted .aui-input.ng-invalid {
  @include input-error;
}
