@import '../../theme/var';
@import '../../theme/mixin';

$block: 'aui-search';

$component-size: (
  large: (),
  medium: (
    height: get-size(inline-height-m),
    line-height: get-size(line-height-m),
    icon-size: get-size(icon-size-m),
  ),
  small: (),
  mini: (),
);

.#{$block} {
  display: inline-block;
  width: 100%;
  position: relative;
  color: get-color(n-4);

  &.isDisabled {
    color: get-text-color(disabled);
    cursor: not-allowed;
  }

  &--medium {
    $icon-width: $input-medium-padding-hoz * 2 + $input-medium-font-size +
      $input-border-width;
    $button-width: $icon-width + $input-border-width;

    font-size: $input-medium-font-size;

    .#{$block}__clear,
    .#{$block}__spinner {
      right: $input-medium-padding-hoz + $border-width;
    }

    .#{$block}__icon {
      left: $input-medium-padding-hoz + $input-border-width;
    }

    .#{$block}__button-icon {
      padding: 0 $input-medium-padding-hoz;
    }

    &.isClearable .#{$block}__input,
    &.isSearching .#{$block}__input {
      padding-right: $icon-width;
    }

    &.hasIcon .#{$block}__input {
      padding-left: $icon-width;
    }

    &.hasButton .#{$block} {
      &__input {
        padding-right: $button-width + $input-medium-padding-hoz;
      }

      &__clear {
        right: $button-width + $input-medium-padding-hoz;
      }
    }

    &.hasButton.isClearable .#{$block}__input {
      padding-right: $icon-width + $button-width;
    }
  }

  @each $key in large medium small mini {
    $map: map-get($component-size, $key);

    &--#{$key} {
      aui-icon {
        font-size: map-get($map, icon-size);
      }
    }
  }

  &__icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    color: get-text-color(placeholder);
  }

  &__button {
    position: absolute;
    top: 0;
    right: 1px;
    height: 100%;
    display: flex;
    align-items: center;
  }

  &:not(.isDisabled):not(.isSearching) &__button {
    cursor: pointer;

    &:hover {
      color: get-color(primary);
    }
  }

  &__button-icon {
    border-left: 1px solid get-color(n-7);
  }

  &__clear,
  &__spinner {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }

  &__clear .aui-icon {
    @include clear-button;
  }
}
